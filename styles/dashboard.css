/* ===== HEADER ===== */
.dashboard-header {
  background: linear-gradient(135deg, #0f4c75, #1b6ca8);
  color: white;
  padding: 26px 32px;
  border-radius: 0 0 24px 24px;
  display: flex;
  justify-content: space-between;
  gap: 18px;
}

.dashboard-header h1 { margin: 8px 0 4px; font-size: 22px; color:#fff; }
.dashboard-header p { opacity: 0.88; font-size: 14px; }

.badge {
  background: rgba(255,255,255,0.18);
  padding: 6px 14px;
  border-radius: 999px;
  font-size: 12px;
}
.author { align-self: center; opacity: 0.92; }

/* ===== PAGE WRAP ===== */
.dashboard {
  max-width: 1240px;
  margin: 0 auto;
  padding: 18px 18px 28px;
}

.controls {
  display: grid;
  grid-template-columns: 1.2fr 0.9fr 0.9fr;
  gap: 14px;
  align-items: end;
  margin-bottom: 14px;
}
@media (max-width: 980px) { .controls { grid-template-columns: 1fr; } }

.main-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 16px;
}

/* ===== MAP PANEL ===== */
.map-panel { padding: 0; overflow: hidden; }
.map-header {
  padding: 12px 16px 10px;
  border-bottom: 1px solid rgba(0,0,0,0.06);
  display: flex;
  justify-content: space-between;
  align-items: baseline;
}
.map-header h2 { margin: 0; font-size: 16px; }

/* ===== MODAL ===== */
.mh-modal.is-hidden { display: none; }

.mh-modal{
  position: fixed;
  inset: 0;
  z-index: 9999;
}

.mh-modal__backdrop{
  position: absolute;
  inset: 0;
  background: rgba(6, 10, 18, 0.62);
  backdrop-filter: blur(8px);
}

.mh-modal__card{
  position: relative;
  width: min(1200px, calc(100vw - 24px));
  height: min(88vh, 860px);
  margin: 12px auto;
  border-radius: 22px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.96);
  box-shadow: 0 24px 80px rgba(0,0,0,0.25);
  overflow: hidden;
  animation: mhPopIn 160ms ease-out;
}

@keyframes mhPopIn{
  from { transform: translateY(10px); opacity: 0; }
  to   { transform: translateY(0); opacity: 1; }
}

.mh-modal__header{
  padding: 16px 18px 12px;
  border-bottom: 1px solid rgba(0,0,0,0.08);
  display: flex;
  justify-content: space-between;
  gap: 12px;
  align-items: flex-start;
  background: linear-gradient(180deg, rgba(15,76,117,0.10), rgba(255,255,255,0));
}

.mh-modal__kicker{
  font-size: 12px;
  color: #0f4c75;
  font-weight: 900;
  letter-spacing: .06em;
  text-transform: uppercase;
}

.mh-modal__title{ font-size: 22px; margin-top: 4px; }
.mh-modal__subtitle{ color: #6b7280; font-size: 13px; margin-top: 2px; }

.mh-modal__close{
  border: 1px solid rgba(0,0,0,0.12);
  background: rgba(255,255,255,0.95);
  border-radius: 12px;
  width: 42px;
  height: 42px;
  cursor: pointer;
  font-size: 16px;
  line-height: 42px;
  transition: transform .12s, border-color .12s, box-shadow .12s;
}
.mh-modal__close:hover{
  transform: translateY(-1px);
  border-color: rgba(37,99,235,.45);
  box-shadow: 0 12px 30px rgba(0,0,0,0.12);
}

.mh-modal__body{
  height: calc(100% - 76px);
  padding: 14px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
  align-items: stretch;
}
@media (max-width: 980px) { .mh-modal__body { grid-template-columns: 1fr; } }

.mh-modal__panel{
  background: rgba(255,255,255,0.92);
  border: 1px solid rgba(15,23,42,0.08);
  border-radius: 16px;
  box-shadow: 0 16px 40px rgba(0,0,0,0.08);
  overflow: hidden;
  display: grid;
  grid-template-rows: auto 1fr;
  min-height: 560px;
}

.mh-modal__panelHeader{
  padding: 12px 14px;
  border-bottom: 1px solid rgba(15,23,42,0.06);
  background: linear-gradient(rgba(17,76,117,0.10), rgba(255,255,255,0));
}
.mh-modal__panelHeader h3{
  margin: 0;
  font-size: 14px;
  font-weight: 950;
  color: #0f172a;
}
.mh-modal__panelHeader .muted{
  margin: 3px 0 0;
  font-size: 12.5px;
  color: #64748b;
}

/* ✅ IMPORTANT: pas de scroll interne qui coupe les visus */
#timeseries, #chord{
  padding: 10px 14px 14px;
  overflow: visible;
}

/* ✅ IMPORTANT: ne pas forcer de height CSS (sinon crop) */
#timeseries svg, #chord svg{
  display: block;
  width: 100%;
  height: auto;
}

/* ===== Common inside modal ===== */
.viz-header{ margin: 0 0 8px 0; display: grid; gap: 2px; }
.viz-title{ font-size: 13.5px; font-weight: 950; color: #0f172a; }
.viz-subtitle{ font-size: 12.5px; color: #64748b; line-height: 1.25; }
.viz-meta{ margin: 8px 0 10px; font-size: 12.5px; color:#64748b; }

.viz-mini-legend{
  display:flex; gap:8px; flex-wrap:wrap;
  margin: 6px 0 10px;
}
.pill{
  font-size:12px;
  padding:5px 10px;
  border-radius:999px;
  border:1px solid rgba(15,23,42,0.10);
  background:#fff;
  color:#0f172a;
}
.pill-age{ background: rgba(37,99,235,0.10); border-color: rgba(37,99,235,0.20); color:#1d4ed8; }
.pill-dis{ background: rgba(100,116,139,0.10); border-color: rgba(100,116,139,0.20); color:#334155; }

/* ===== Tooltip ALWAYS on top of modal ===== */
.tooltip{
  position: fixed;     /* ✅ important */
  z-index: 100000;     /* ✅ important */
  pointer-events: none;
}



